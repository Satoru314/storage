# 面談用説明台本

## 【導入 - 30秒】
「ファイルストレージサーバーの設計について説明させていただきます。今回は画像ファイルのアップロード処理を中心に、SPA・バックエンド・S3を組み合わせた実践的なシステム設計をご提案いたします。」

## 【システム全体像 - 1分30秒】
**[アーキテクチャ図を指しながら]**

「システム構成はこちらの通りです。フロントエンドのReact SPA、Go製のバックエンドAPI、PostgreSQLでのメタデータ管理、そしてAWS S3での実際のファイルストレージという4層構成となっています。

**重要なのは、ファイルアップロードはバックエンドを経由せず、フロントエンドからS3に直接アップロードする設計にしている点です。** これにより：
- サーバーの負荷軽減
- アップロード速度の向上  
- 帯域幅の節約
を実現しています。」

## 【アップロードフロー詳細 - 2分】
**[フロー図を示しながら]**

「具体的なアップロードフローを説明します。

1. **アップロード要求**: ユーザーがファイルを選択すると、フロントエンドからバックエンドにファイル情報（名前、サイズ、MIMEタイプ）を送信
2. **メタデータ保存**: バックエンドでファイル検証を行い、PostgreSQLにメタデータを保存
3. **Presigned URL生成**: AWS SDKを使って5分間有効のPresigned URLを生成し、フロントエンドに返却
4. **直接アップロード**: フロントエンドがPresigned URLを使ってS3に直接ファイルをアップロード
5. **完了通知**: アップロード成功後、フロントエンドからバックエンドに完了通知を送信し、ステータスを更新

この設計により、**セキュリティを保ちながら効率的なアップロードが可能**になります。」

## 【API設計のポイント - 1分30秒】
「API設計では6つのエンドポイントを用意しています。特筆すべきは：

- **POST /images/upload-request**: アップロード前の検証とPresigned URL生成を同時に行う
- **POST /images/view-urls**: 表示用の一括Presigned URL生成で、N+1問題を回避
- **POST /images/upload-complete**: アップロード完了の確実な追跡

**RESTfulな設計**に従いつつ、実用性を重視したエンドポイント構成としています。」

## 【セキュリティ・パフォーマンス配慮 - 1分30秒】
「セキュリティ面では：
- MIMEタイプとファイルサイズの事前検証
- Presigned URLの短時間有効期限（5分）
- CORS設定による適切なオリジン制限

パフォーマンス面では：
- S3への直接アップロードによるサーバー負荷軽減
- 画像表示時の一括URL取得
- 適切なデータベースインデックス設計

このように、**各コンポーネントの責務を明確に分離**した設計となっています。」

## 【まとめ - 30秒】
「以上が、スケーラブルで安全なファイルストレージシステムの設計です。実装の詳細や技術選定理由については、ご質問いただければ詳しくお答えいたします。」

---

## 発表時のポイント

### 準備物
- [ ] アーキテクチャ図（手書きまたはスライド）
- [ ] アップロードフロー図
- [ ] API仕様書（簡易版）
- [ ] 実装済みデモ画面（可能であれば）

### 話し方のコツ
- **図を活用**: 口頭説明と図を連動させる
- **数値を示す**: 「5分間」「50MB」など具体的な数値で説得力向上
- **実装経験をアピール**: 「実際に作って検証しました」が強み
- **質問を促す**: 「ご質問はございませんか？」で双方向性確保

### 時間配分目安
- 導入: 30秒
- 全体像: 1分30秒  
- フロー詳細: 2分
- API設計: 1分30秒
- セキュリティ: 1分30秒
- まとめ: 30秒
- **合計: 約7分** + 質疑応答